日期： 2022-04-18

标签： #学习笔记 #技术 #Android 

学习资料： 
腾讯课堂 - https://ke.qq.com/webcourse/3060320/105200059#taid=13820977128321632&vid=387702298740034439

百度网盘 - https://pan.baidu.com/disk/main?from=homeFlow#/index?category=all&path=%2F%E5%AD%A6%E4%B9%A0%2F%E4%BA%AB%E5%AD%A6VIP%E8%AF%BE%E7%A8%8B%2F2%E6%9C%9F%2F%E3%80%9007%E3%80%91NDK%2F%EF%BC%8804%EF%BC%892021.3.2%E6%8C%87%E9%92%88%E5%AE%9E%E6%88%98%E8%BF%90%E7%94%A8%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%EF%BC%88NDK%E7%AC%AC%E5%9B%9B%E8%8A%82%E8%AF%BE%EF%BC%89

---
<br>

### 一、字符串两种声明方式
1. `char str[] = {'a','b','c','\0'};` ：声明一个char数组，里面的元素能够被修改。末尾是 `\0` 可以保证 `printf()` 不打印后续的系统值
2. `char* str = "abc";` : 这种声明方式，"abc" 会到 "全局区/静态区" 中，并且不可修改。

```C
#include <stdio.h>

// 字符串声明
int mainT2() {
	char str[] = { 'D', 'e', 'r', 'r', 'y', '\0' };
	str[2] = 'z';
	printf("第一种方式：%s\n", str); // printf()必须遇到 \0 才结束打印

	char* str2 = "Derry"; // 隐式添加 \0，即 Derry+\0
	str2[2] = 'z'; // 会奔溃，这里str2指向的，是 "全局区/静态区" 里的 "Derry" 字符串地址，这个字符串是不允许修改的
	printf("第二种方式：%s\n", str2);

	return 0;
}
```

![600](../99附件/20220418234103.png)

<br><br>

### 二、指针挪动获取字符串长度
- 循环 + 指针挪动
```C
// 3.指针挪动获取字符串信息(手写API)。

#include <stdio.h>

void getLenWithP(int* result, char intarr[]) {
	/* 
		C/C++编译器：当数组作为参数传递时，会把数组优化成一个指针（为了高效率）
		因为数组被转成指针，导致 sizeof(intarr) 返回的是一个指针的长度=4，所以就不能用下面的方式计算字符串长度：

		// sizeof(intarr)28 / sizeof(int)4 = 7
		int len = sizeof(intarr) / sizeof(int);
		printf("getLen len长度是: %d\n", len);
	*/

	// 因为【int类型】的数组中，0与\0相等，所以不能用 if(*intarr != '\0') 或者 if(*intarr) 的方式判断是否已遍历到数组末尾，而应该调用 strlen() 计算数组长度
	// int intarr[] = { 1,2,3,0,5,6,7 };

	// 遍历计算长度
	int count = 1; // 之所以这里要从1开始，是为了把 '\0' 也计算进来
	
	while (*intarr) { // 等价于 *intarr != '\0'
		printf("count start: %d, %c\n", count, *intarr);

		intarr++; // 指针挪动
		count++;

		printf("count end: %d, %c\n\n", count, *intarr);
	}

	*result = count; //通过指针赋值的方式，将结果返回出去
}

int mainT3() {
	
	char intarr[] = { '1','2','3','0','5','6','7','\0' };

	// 【第一种方式】
	// sizeof(intarr)28 / sizeof(char)1 = 7
	int len = sizeof(intarr) / sizeof(char);
	printf("len长度是: %d\n\n", len);

	// 【第二种方式】
	int result;
	getLenWithP(&result, intarr); // 传入指针&result，接收返回值
	printf("getLenWithP 返回的长度是: %d\n", result);

	return 0;
}
```

![800](../99附件/20220420000422.png)

<br><br>

### 三、字符串转换、比较
- `strcmp()` ：区分大小写，返回0=相等、非0=不相等。
- `strcmpi()` ："不" 区分大小写，返回0=相等、非0=不相等。
- `atoi()` ：把字符串转换成长整型数。
- `atof()` ：把字符串转换成浮点数。
```C
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int mainT4() {
	/*
		1.【字符串转换】 =======================
	*/
	char* num = "1";
	num = "12.68";// atoi转换成 12; atof转换成 12.68

	//【int】
	int result = atoi(num); // atoi，把字符串转换成长整型数
	if (result) { // 非0即ture，0就是false
		printf("恭喜你转换成功:%d\n", result);
	}
	else {
		printf("转换失败！\n");
	}

	//【double】
	double resultD = atof(num);
	printf("恭喜你转换成功:%lf\n", resultD);


	/*
		2.【字符串的比较】 =======================
	*/
	char* str1 = "Derry";
	char* str2 = "derry";

	// int resultC = strcmp(str1, str2); // strcmp = 区分大小写
	int resultC = strcmpi(str1, str2); // strcmpi = "不" 区分大小写

	if (!resultC) { // 0=相等，非0=不相等
		printf("相等");
	}
	else {
		printf("不相等");
	}

	return 0;
}

```

<br><br>

### 四、字符串查找、包含、拼接

```C

```
